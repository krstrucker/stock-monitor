# 미국 주식 매수 신호 생성 시스템

미국 주식의 매수 신호를 자동으로 생성하고 최적의 수익률 전략을 제시하는 시스템입니다.

## 주요 기능

### 3종류의 매수 신호

1. **🟢 강한 매수 (STRONG_BUY)**: 점수 8-10
   - 여러 기술적 지표가 동시에 긍정적
   - 높은 수익 기대

2. **🔵 매수 (BUY)**: 점수 5-7
   - 일부 지표가 긍정적
   - 수익 가능성 있음

3. **🟡 관망 매수 (WATCH)**: 점수 3-4
   - 잠재적 기회가 있으나 추가 확인 필요

### 지원하는 거래 스타일

- **데이트레이딩**: 5분봉 데이터 기반
- **단기 스윙**: 일봉 데이터 기반 (20일)
- **중장기 스윙**: 일봉 데이터 기반 (60일)

### 기술적 지표

- RSI (상대강도지수)
- MACD (이동평균수렴확산)
- 이동평균선 (20일, 50일)
- 볼린저 밴드
- 거래량 분석
- 모멘텀 지표

### 백테스팅 기능

과거 데이터를 기반으로 각 신호 레벨별 수익률을 검증합니다:
- 총 거래 횟수
- 승률
- 총 수익률
- 수익 팩터
- 평균 수익/손실

### 🎯 최적 거래 스타일 자동 추천 (NEW!)

각 종목에 대해 3가지 거래 스타일(데이트레이딩, 단기 스윙, 중장기 스윙)을 모두 분석하여:
- 가장 높은 수익률을 보이는 거래 스타일 자동 추천
- 각 시간프레임별 백테스팅 결과 비교
- 현재 신호 점수와 과거 수익률을 종합 고려한 추천

### 📊 전체 인덱스 스캔 (NEW!)

S&P 500, NASDAQ 100, Dow 30 등 주요 인덱스의 전체 종목을 자동으로 스캔:
- 인덱스 종목 리스트 자동 수집
- 모든 종목에 대한 매수 신호 생성
- 매수 신호가 있는 종목만 필터링하여 표시
- `limit` 파라미터로 스캔할 종목 수 제한 가능

### ⚡ 속도 최적화 (NEW!)

**멀티스레딩 병렬 처리**로 속도 대폭 향상:
- **10개 종목**: 약 2초 (이전: 20-30초)
- **100개 종목**: 약 20초 (이전: 3-5분)
- **1000개 종목**: 약 3-5분 (이전: 30-50분)
- **7000개 종목**: 약 20-30분 (이전: 4-6시간)

**최적화 기능:**
- 멀티스레딩 병렬 처리 (기본 20개 스레드)
- 배치 데이터 수집 (yfinance.download)
- 백테스팅 스킵 옵션 (스캔 시)
- 캐싱으로 중복 요청 방지

### 🤖 자동 모니터링 (NEW!)

**24시간 자동 모니터링 시스템:**
- 주기적으로 스캔 실행 (기본: 60분마다)
- 새로운 매수 신호 자동 감지
- 신호 변화 알림 (예: WATCH → BUY, BUY → STRONG_BUY)
- 신호 히스토리 저장 및 추적
- 백그라운드 실행 가능

**사용 방법:**
```bash
# 기본 실행 (60분마다 스캔, 100개 종목)
python monitor.py

# 커스텀 설정
python monitor.py --interval 30 --symbols 200 --workers 30
```

## 설치 방법

1. 필요한 패키지 설치:
```bash
pip install -r requirements.txt
```

## 사용 방법

### 기본 실행

```bash
python main.py
```

### 코드에서 사용

```python
from main import StockSignalSystem

system = StockSignalSystem()

# 단일 심볼 분석
result = system.analyze_symbol('AAPL', 'short_swing')
system.display_signal(result)

# 여러 심볼 스캔 (병렬 처리로 빠른 속도)
signals = system.scan_multiple_symbols(['AAPL', 'MSFT', 'GOOGL'], 'short_swing')

# 속도 최적화 옵션
signals = system.scan_multiple_symbols(
    symbols, 
    'short_swing',
    max_workers=20,  # 동시 실행 스레드 수 (기본값: 20)
    show_progress=True  # 진행 상황 표시
)

# 📊 전체 인덱스 스캔 (NEW!)
# S&P 500 전체 종목 스캔 (처음 50개만)
signals = system.scan_index('sp500', 'short_swing', limit=50)

# NASDAQ 100 전체 종목 스캔
signals = system.scan_index('nasdaq100', 'short_swing', limit=50)

# Dow 30 전체 종목 스캔
signals = system.scan_index('dow30', 'short_swing')

# 최적 전략 찾기
best = system.find_best_strategy('AAPL', 'short_swing')

# 🎯 최적 거래 스타일 추천 (NEW!)
recommendation = system.recommend_timeframe('AAPL')
# 각 종목에 가장 적합한 거래 스타일(데이트레이딩/단기스윙/중장기스윙)을 자동으로 추천합니다
```

## 설정 변경

`config.py` 파일에서 다음을 수정할 수 있습니다:

- 분석할 주식 심볼 목록
- 기술적 지표 가중치
- RSI, MACD, 이동평균선 등의 파라미터
- 신호 레벨 점수 범위

## 출력 예시

```
🟢 현재 매수 신호: 강한 매수
   점수: 8.5/10
   가격: $150.25
   날짜: 2024-01-15
   RSI: 35.2
   MACD: 0.45

📈 백테스팅 결과 (과거 데이터 기준):
강한 매수 신호 전략:
   총 거래: 15회
   승률: 73.33%
   총 수익률: 12.5%
   수익 팩터: 2.1

🎯 최적 거래 스타일 추천:
✅ 추천 거래 스타일: 단기 스윙
   예상 수익률: 15.32%
   현재 신호 점수: 7.5/10 (BUY)

📋 모든 시간프레임 비교:
🥇 단기 스윙      | 수익률:  15.32% | 현재 점수:  7.5/10
   중장기 스윙     | 수익률:  12.45% | 현재 점수:  6.8/10
   데이트레이딩    | 수익률:   8.23% | 현재 점수:  5.2/10
```

## 주의사항

- 이 시스템은 매수 신호만 제공하며, 실제 매매 결정은 사용자가 직접 해야 합니다.
- 과거 성과가 미래 수익을 보장하지 않습니다.
- 투자 전 충분한 리서치와 리스크 관리가 필요합니다.

