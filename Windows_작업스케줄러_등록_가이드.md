# Windows 작업 스케줄러 등록 가이드

## ⚠️ 중요: 작업 스케줄러의 한계

**Windows 작업 스케줄러는:**
- ✅ 컴퓨터가 **켜져 있을 때** 자동으로 프로그램을 실행합니다
- ❌ 컴퓨터가 **꺼져 있으면** 아무것도 실행할 수 없습니다
- ❌ 컴퓨터를 **자동으로 켜는 기능은 없습니다**

## 문제 해결

**새벽에 스캔이 실행되지 않은 이유:**
1. 서버가 실행되지 않았습니다 (파일이 없었음) → **해결됨**
2. 컴퓨터가 꺼져 있었을 가능성 → **컴퓨터를 켜두거나 절전 모드로 설정 필요**
3. 작업 스케줄러에 등록되지 않아서 자동 실행되지 않음 → **등록 필요**

**작업 스케줄러 등록의 목적:**
- 컴퓨터가 **켜져 있을 때** 자동으로 서버 실행
- 컴퓨터 재시작 후 자동으로 서버 실행
- 로그인하지 않아도 서버 실행

## 해결 방법

### 방법 1: 작업 스케줄러에 등록 (권장)

1. **작업 스케줄러 열기**
   - Windows 키 + R
   - `taskschd.msc` 입력 후 Enter

2. **기본 작업 만들기**
   - 오른쪽 "기본 작업 만들기" 클릭
   - 이름: "주식 모니터링 서버"
   - 설명: "주식 매수 신호 모니터링 서버 자동 실행"

3. **트리거 설정**
   - "컴퓨터가 시작할 때" 선택
   - 또는 "로그온할 때" 선택

4. **동작 설정**
   - "프로그램 시작" 선택
   - 프로그램/스크립트: `C:\Users\용\Desktop\us stock auto\start_server.bat`
   - 시작 위치: `C:\Users\용\Desktop\us stock auto`

5. **조건 설정**
   - "컴퓨터가 AC 전원에 연결되어 있을 때만 작업 실행" 체크 해제
   - "작업을 실행하기 위해 컴퓨터가 대기 모드에 있어도 깨우기" 체크

6. **설정**
   - "작업이 실행 중이 아닐 때 시작하도록 허용" 체크
   - "작업이 요청된 시간에 실행할 수 없으면 즉시 실행" 체크

### 방법 2: 시작 프로그램에 등록

1. **시작 프로그램 폴더 열기**
   - Windows 키 + R
   - `shell:startup` 입력 후 Enter

2. **바로가기 만들기**
   - `start_server.bat` 파일을 시작 프로그램 폴더로 복사
   - 또는 바로가기 생성

### 방법 3: 서비스로 등록 (고급)

NSSM (Non-Sucking Service Manager)을 사용하여 Windows 서비스로 등록할 수 있습니다.

## 확인 방법

1. 작업 스케줄러에서 작업이 등록되어 있는지 확인
2. 컴퓨터 재시작 후 서버가 자동으로 실행되는지 확인
3. `http://127.0.0.1:5000/status` 접속하여 서버 상태 확인

## 중요 사항

- **종목 리스트 필요**: 현재 `get_all_symbols()` 함수가 빈 리스트를 반환합니다.
- 실제로 약 7000개 종목을 스캔하려면 종목 리스트 파일이나 API가 필요합니다.
- `symbol_fetcher.py`를 실제로 구현하거나, 종목 리스트를 파일로 제공해야 합니다.

